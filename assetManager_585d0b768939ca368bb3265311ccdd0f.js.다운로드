(function(w,d){function AssetManager(){this.reset()}AssetManager.prototype.reset=function(){this.cdnBase="";this.cdnPath="";this.required={css:{},js:{}}};AssetManager.prototype.process=function(payload,callback,customConfig){var req=payload.req||{};var reqFull=payload.reqFull||{};var inlineStyles=payload.inlineStyles||{};var conf=customConfig||{};var evalStrategy=conf.evalStrategy;var returnPayload=conf.returnPayload;var promises=[];if(payload.cdnBase){this.cdnBase=payload.cdnBase}if(payload.cdnPath){this.cdnPath=payload.cdnPath}if(req.css){promises.push(this.require(req.css,"css"))}if(reqFull.css){promises.push(this.requireFull(reqFull.css,"css"))}if(inlineStyles){promises.push(this.processInlineStyles(inlineStyles,"css"))}if(req.js){promises.push(this.require(req.js,"js"))}if(reqFull.js){promises.push(this.requireFull(reqFull.js,"js"))}return Promise.all(promises).then(function(){if(typeof callback==="function"){var cbRet=callback(payload.body);if(w.YAHOO.AjaxHelper&&w.YAHOO.AjaxHelper.EVAL_STRATEGY&&evalStrategy===w.YAHOO.AjaxHelper.EVAL_STRATEGY.DEFERRED){return cbRet}}return true}).then(function(){if(payload.inlineScripts){eval(payload.inlineScripts)}if(returnPayload){return payload}})};AssetManager.prototype.require=function(assets,type){var params="";var flag=false;for(var asset in assets){if(!this.required[type][asset]){params+=(flag?"&":"")+this.cdnPath+assets[asset];this.required[type][asset]=true;flag=true}}if(flag){var src=this.cdnBase+params;return type==="css"?this.loadStyle(src):this.loadScript(src)}else{return Promise.resolve(true)}};AssetManager.prototype.requireFull=function(assets,type){var promises=[];for(var asset in assets){if(!this.required[type][asset]){var src=assets[asset];promises.push(type==="css"?this.loadStyle(src):this.loadScript(src));this.required[type][asset]=true}}return Promise.all(promises)};AssetManager.prototype.requireDry=function(assets,type){for(var i=0;i<assets.length;i++){var asset=assets[i];this.required[type][asset]=true}};AssetManager.prototype.createInlineStyle=function(style,id){if(!id||!this.required.css[id]){if(id){this.required.css[id]=true}return this.loadInternalStyle(style)}else{return true}};AssetManager.prototype.processInlineStyles=function(styleMap){var promises=[];for(var _key in styleMap){var style=styleMap[_key];var key=isNaN(_key)?_key:undefined;promises.push(this.createInlineStyle(style,key))}return Promise.all(promises)};AssetManager.prototype.loadStyle=function(src){var link=document.createElement("link");link.rel="stylesheet";link.type="text/css";link.href=src;return this.loadAssetAsync(link)};AssetManager.prototype.loadInternalStyle=function(style){var styleTag=document.createElement("style");styleTag.type="text/css";if(styleTag.styleSheet){styleTag.styleSheet.cssText=style}else{styleTag.appendChild(document.createTextNode(style))}return this.loadAssetAsync(styleTag)};AssetManager.prototype.loadScript=function(src){var script=document.createElement("script");script.type="text/javascript";script.src=src;return this.loadAssetAsync(script)};AssetManager.prototype.loadAssetAsync=function(assetElement){return new Promise(function(resolve,reject){var done=false;assetElement.async=true;assetElement.onload=assetElement.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;resolve();assetElement.onload=assetElement.onreadystatechange=null}};var head=document.head||document.getElementsByTagName("head")[0];head.appendChild(assetElement)})};w.YAHOO=w.YAHOO||{};var assetManager=new AssetManager();if(w.YAHOO.AssetManager&&typeof w.YAHOO.AssetManager.pour=="function"){w.YAHOO.AssetManager.pour(assetManager)}w.YAHOO.AssetManager=assetManager})(window,document);